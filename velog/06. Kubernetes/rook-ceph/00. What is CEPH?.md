---
tags:
  - Kubernetes
  - Rook-Ceph
  - Storage
  - CEPH
---
## Overview
CEPH란 `Cephalopods(두족류)`이라는 단어에서 앞의 네글자를 떼서 따온 용어입니다.

`CEPH`는 오픈소스 기반의 분산 스토리지 시스템입니다.
`오브젝트(Object)`, `블록(Block)`, `파일(File)` 스토리지를 단일 시스템에서 지원하는 것이 특징입니다.
`무중단 운영(High Availabillty)`, `수평적 확장(Scalabillity)`, `자동 복구(Self-Healing)` 등 강력한 기능을 제공하며, 클라우드 및 대규모 데이터 센터에서 많이 활용됩니다.

극명한 단점이 한가지 있는데 `CEPH`의 경우 데이터들을 `Object`형태로 저장시키기 때문에 데이터를 편집하게되면 일부분만 수정하는 것이 아닌 전체를 덮어씌우는 방식으로 동작합니다.

그래서 상황에 맞게 신중히 판단해서 결정해야합니다.

## CEPH란?
> 분산형 스토리지로 여러 스토리지들을 클러스터로 묶어 하나로 보이게하는 스토리지

`CEPH`의 경우 분산 클러스터 위에 `ObjectStorage`를 구현해 `Object`, `Block`, `File` 레벨의 `Storage Interface`를 제공합니다.

###  장점
- 고가용성 \& 무중단 운영: `SPOF(Single Point Of Failuer)`없이 장애 발생 시 자동 복구.
- 수평적 확장성(Scalabillity): Exabyte 수준까지 확장 가능.
- 다양한 스토리지 인터페이스 지원: `Block`, `File`, `Ojbect Storage`를 단일 시스템에서 지원.
- 오픈소스 기반: 비용 효율적이며 커뮤니티 자원이 활발해 정보가 많음.

### 단점
- 높은 하드웨어 요구사항: 많은 메모리와 디스크 `IOPS(Inpt/Output Per Second)` 성능이 필요함.
- 설정이 복잡함: 초기에 튜닝과 클러스터 설정이 까다로움.
- 복구 속도: Erasure Coding 기반의 데이터 복구는 속도가 느릴 수 있음.

---
## CEPH' Daemons
### Monitors
- Ceph Monitor(ceph-mon)는 monitor map, manager map, OSD map, CRUSH map과 같은 cluster의 상태 정보를 구성합니다.
- HA를 위해서는 3개 이상 구성하는 것이 좋습니다.
### Managers
- CEPH Manager(ceph-mgr)는 storage utilization이나 permormance, system load와 같은 Ceph cluster의 상태 정보를 추적합니다.
- HA를 위해서는 2개 이상 구성하는 것이 좋습니다.
### Ceph OSDs
- Ceph OSD(Object Storage Deamon, ceph-osd)는 데이터를 저장하고, replication이나 recovery, reblanacing을 수행합니다.
- Ceph OSD 데몬들의 heartbeat를 Ceph Monitors and Managers에 제공하기도 합니다.
- HA를 위해서는 3개 이상 구성하는 것이 좋습니다.
### MDSs
- CEPH metadata Server(MDS, ceph-mds)는 Ceph File System의 메타데이터를 저장합니다.(Ceph Block Devices나 Ceph Object Storage는 MDS를 사용하지 않습니다.)
- Ceph Metadata Server를 통해 POSIX File System 사용자는 Ceph Storage Cluster에 큰 부담을 주지 않으면서 기본 명령을 실행할 수 있습니다.
### CEPH Object Gateway
- Rados Gateway(ceph-rgw)는 Amazon S3와 Openstack Swift Api용 인터페이스로 사용되는 Object Storage lazyer입니다.\

---
## CEPH Architechure
![[스크린샷 2025-11-03 오후 5.13.24.png]]